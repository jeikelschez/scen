(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{432:function(t,e,r){r.r(e),r.d(e,"ByteRangeRequest",(function(){return E}));var s=r(1),i=r(0);r.n(i);var n=r(2),a=r(149);t=r(94);var u=r(246),o=r(73),h=r(71),c=r(245),d=r(166);r=r(374);var f,l=[],p=[],O=window,b=function(){return function(){this.lm=1}}();(function(t){t[t.UNSENT=0]="UNSENT",t[t.DONE=4]="DONE"})(f||(f={}));var E=function(){function t(t,e,r,s){var n=this;this.url=t,this.range=e,this.df=r,this.withCredentials=s,this.q2=f,this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),O.Uint8Array&&(this.request.responseType="arraybuffer"),s&&(this.request.withCredentials=s),q.DISABLE_RANGE_HEADER||(Object(i.isUndefined)(e.stop)?this.request.setRequestHeader("Range","bytes="+e.start):this.request.setRequestHeader("Range",["bytes=",e.start,"-",e.stop-1].join(""))),r&&Object.keys(r).forEach((function(t){n.request.setRequestHeader(t,r[t])})),this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined"),this.status=c.a.NOT_STARTED}return t.prototype.start=function(t){var e=this,r=this.request;r.onreadystatechange=function(){if(e.aborted)return e.status=c.a.ABORTED,t({code:c.a.ABORTED});if(this.readyState===e.q2.DONE){e.BC();var s=0===window.document.URL.indexOf("file:///");200===r.status||206===r.status||s&&0===r.status?(s=O.bU(this),e.bN(s,t)):(e.status=c.a.ERROR,t({code:e.status,status:e.status}))}},this.request.send(null),this.status=c.a.STARTED},t.prototype.bN=function(t,e){if(this.status=c.a.SUCCESS,e)return e(!1,t)},t.prototype.abort=function(){this.BC(),this.aborted=!0,this.request.abort()},t.prototype.BC=function(){var e=Object(d.c)(this.url,this.range,p);if(-1!==e&&p.splice(e,1),0<l.length){e=l.shift();var r=new t(e.url,e.range,this.df,this.withCredentials);e.request=r,p.push(e),r.start(Object(d.d)(e))}},t.prototype.extend=function(t){var e=Object.assign({},this,t.prototype);return e.constructor=t,e},t}(),q=function(t){function e(e,r,s,i,n){return s=t.call(this,e,s,i)||this,s.pm={},s.dB=r,s.url=e,s.DISABLE_RANGE_HEADER=!1,s.Vx=E,s.ZN=3,s.df=n||{},s}return Object(s.c)(e,t),e.prototype.Ov=function(t,e,r){var s=-1===t.indexOf("?")?"?":"&";switch(r){case!1:case h.a.NEVER_CACHE:t=t+s+"_="+Object(i.uniqueId)();break;case!0:case h.a.CACHE:t=t+s+"_="+e.start+","+(Object(i.isUndefined)(e.stop)?"":e.stop)}return t},e.prototype.SR=function(t,e,r,s){return void 0===r&&(r={}),new this.Vx(t,e,r,s)},e.prototype.z$=function(t,e,r,s,n){for(var a=0;a<l.length;a++)if(Object(i.isEqual)(l[a].range,e)&&Object(i.isEqual)(l[a].url,t))return l[a].Og.push(s),l[a].GD++,null;for(a=0;a<p.length;a++)if(Object(i.isEqual)(p[a].range,e)&&Object(i.isEqual)(p[a].url,t))return p[a].Og.push(s),p[a].GD++,null;return r={url:t,range:e,dB:r,Og:[s],GD:1},0===l.length&&p.length<this.ZN?(p.push(r),r.request=this.SR(t,e,n,this.withCredentials),r):(l.push(r),null)},e.prototype.io=function(t,e,r){var s=this.Ov(t,e,this.dB);return(t=this.z$(s,e,this.dB,r,this.df))&&t.request.start(Object(d.d)(t)),function(){var t=Object(d.c)(s,e,p);if(-1!==t){var r=--p[t].GD;0===r&&p[t].request&&p[t].request.abort()}else t=Object(d.c)(s,e,l),-1!==t&&(r=--l[t].GD,0===r&&l.splice(t,1))}},e.prototype.AT=function(){return{start:-a.a}},e.prototype.fda=function(){var t=-(a.a+a.e);return{start:t-a.d,end:t}},e.prototype.qt=function(t){var e=this;this.jB=!0;var r=a.a;this.io(this.url,this.AT(),(function(s,i,a){function h(){var r=e.Zd.wT();e.io(e.url,r,(function(s,i){return s?(Object(n.j)("Error loading central directory: "+s),t(s)):(i=Object(o.a)(i),i.length!==r.stop-r.start?t("Invalid XOD file: Zip central directory data is wrong size! Should be "+(r.stop-r.start)+" but is "+i.length):(e.Zd.uX(i),e.GH=!0,e.jB=!1,t(!1)))}))}if(s)return Object(n.j)("Error loading end header: "+s),t(s,i,a);if(i=Object(o.a)(i),i.length!==r)return t("Invalid XOD file: Zip end header data is wrong size!");try{e.Zd=new u.a(i)}catch(c){return t(c)}e.Zd.Jea?e.io(e.url,e.fda(),(function(r,s){if(r)return Object(n.j)("Error loading zip64 header: "+r),t(r);s=Object(o.a)(s),e.Zd.bfa(s),h()})):h()}))},e.prototype.ZT=function(t){t(Object.keys(this.Zd.Hn))},e.prototype.DL=function(t,e){var r=this;if(this.Zd.HR(t)){var s=this.Zd.vC(t);if(s in this.pm){var i=this.Zh[t];i.Yr=this.pm[s],i.Yr.lm++,i.cancel=i.Yr.cancel}else{var a=this.Zd.rba(t),u=this.io(this.url,a,(function(i,u){i?(Object(n.j)('Error loading part "'+t+'": '+i),r.io(r.url,a,(function(i,n){if(i)return e(i,t);r.yX(n,a,s,t,e)}))):r.yX(u,a,s,t,e)})),o=this.Zh[t];o&&(o.DZ=!0,o.cancel=function(){o.Yr.lm--,0===o.Yr.lm&&(u(),delete r.pm[s])},this.pm[s]=new b(s),o.Yr=this.pm[s],o.Yr.cancel=o.cancel)}}else delete this.Zh[t],e(Error('File not found: "'+t+'"'),t)},e.prototype.yX=function(t,e,r,s,i){if(t.length!==e.stop-e.start)i(Error("Part data is wrong size!"),s);else{do{if(!this.pm[r])return;s=this.pm[r].lm;for(var n=e.Iq.length,a=0;a<n;++a){var u=e.Iq[a];i(!1,u.Eq,t["string"===typeof t?"substring":"subarray"](u.start,u.stop),this.Zd.$U(u.Eq)),u.Eq in this.Zh&&delete this.Zh[u.Eq]}}while(s!==this.pm[r].lm);delete this.pm[r]}},e.DISABLE_RANGE_HEADER=!1,e.ZN=3,e}(t.a);(function(t){function e(e,r,s){var n,a=t.call(this)||this;for(n in e)a[n]=e[n];return a.dqa=e,a.startOffset=r,a.endOffset=s,a.SR=function(t,r,s,n){return Object(i.isUndefined)(r.stop)?(r.start+=a.endOffset,r.stop=a.endOffset):(r.start+=a.startOffset,r.stop+=a.startOffset),t=a.Ov(a.url,r,a.dB),new e.Vx(t,r,s,n)},a}Object(s.c)(e,t)})(q),Object(r.a)(q),Object(r.b)(q),e["default"]=q}}])}).call(this||window);