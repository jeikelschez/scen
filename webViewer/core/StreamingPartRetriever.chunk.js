(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[15],{393:function(t,e,s){s.r(e);var r=s(1),i=s(0);s.n(i);var n=s(2),a=s(132);t=s(48);var h=s(84),u=s(216),o=s(61),c=s(215);s=s(316);var E,d=window,f=function(){function t(t,e,s){var r=-1===t.indexOf("?")?"?":"&";switch(e){case o.a.NEVER_CACHE:this.url=t+r+"_="+Object(i.uniqueId)();break;default:this.url=t}this.ze=s,this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),this.request.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined"),this.status=c.a.NOT_STARTED}return t.prototype.start=function(e,s){var r,i=this,n=this,a=this.request;n.Cu=0,e&&Object.keys(e).forEach((function(t){i.request.setRequestHeader(t,e[t])})),s&&(this.request.withCredentials=s),this.QA=setInterval((function(){var e=0===window.document.URL.indexOf("file:///");if(e=200===a.status||e&&0===a.status,a.readyState!==c.b.DONE||e){try{a.responseText}catch(s){return}n.Cu<a.responseText.length&&(r=n.B$())&&n.trigger(t.Events.DATA,[r]),0===a.readyState&&(clearInterval(n.QA),n.trigger(t.Events.DONE))}else clearInterval(n.QA),n.trigger(t.Events.DONE,["Error received return status "+a.status])}),1e3),this.request.send(null),this.status=c.a.STARTED},t.prototype.B$=function(){var e=this.request,s=e.responseText;if(0!==s.length){if(this.Cu!==s.length)return s=Math.min(this.Cu+3e6,s.length),e=d.yO(e,this.Cu,!0,s),this.Cu=s,e;clearInterval(this.QA),this.trigger(t.Events.DONE)}},t.prototype.abort=function(){clearInterval(this.QA);var e=this;this.request.onreadystatechange=function(){return Object(n.j)("StreamingRequest aborted"),e.status=c.a.ABORTED,e.trigger(t.Events.ABORTED)},this.request.abort()},t.prototype.finish=function(){var e=this;this.request.onreadystatechange=function(){return e.status=c.a.SUCCESS,e.trigger(t.Events.DONE)},this.request.abort()},t.Events={DONE:"done",DATA:"data",ABORTED:"aborted"},t}();Object(t.a)(f),function(t){t[t.LOCAL_HEADER=0]="LOCAL_HEADER",t[t.FILE=1]="FILE",t[t.CENTRAL_DIR=2]="CENTRAL_DIR"}(E||(E={}));var l=function(t){function e(){var e=t.call(this)||this;return e.buffer="",e.state=E.LOCAL_HEADER,e.jI=4,e.wk=null,e.br=a.c,e.Nl={},e}return Object(r.c)(e,t),e.prototype.v$=function(t){var s;for(t=this.buffer+t;t.length>=this.br;)switch(this.state){case E.LOCAL_HEADER:if(this.wk=s=this.F$(t.slice(0,this.br)),s.Gr!==a.g)throw Error("Wrong signature in local header: "+s.Gr);t=t.slice(this.br),this.state=E.FILE,this.br=s.FD+s.uo+s.It+this.jI,this.trigger(e.Events.HEADER,[s]);break;case E.FILE:this.wk.name=t.slice(0,this.wk.uo),this.Nl[this.wk.name]=this.wk,s=this.br-this.jI;var r=t.slice(this.wk.uo+this.wk.It,s);if(this.trigger(e.Events.FILE,[this.wk.name,r,this.wk.UD]),t=t.slice(s),t.slice(0,this.jI)!==a.h)return this.state=E.CENTRAL_DIR,!0;this.state=E.LOCAL_HEADER,this.br=a.c}return this.buffer=t,!1},e.Events={HEADER:"header",FILE:"file"},e}(u.a);Object(t.a)(l),t=function(t){function e(e,s,r,i,n){return r=t.call(this,e,r,i)||this,r.url=e,r.stream=new f(e,s),r.qd=new l,r.nR=window.createPromiseCapability(),r.OR={},r.ze=n,r}return Object(r.c)(e,t),e.prototype.sv=function(t){var e=this;return this.request([this.ni,this.wj,this.li]),this.stream.addEventListener(f.Events.DATA,(function(s){try{if(e.qd.v$(s))return e.stream.finish()}catch(r){throw e.stream.abort(),e.Ft(r),t(r),r}})),this.stream.addEventListener(f.Events.DONE,(function(s){e.c$=!0,e.nR.resolve(),s&&(e.Ft(s),t(s))})),this.qd.addEventListener(l.Events.HEADER,Object(i.bind)(this.NR,this)),this.qd.addEventListener(l.Events.FILE,Object(i.bind)(this.V$,this)),this.stream.start(this.ze,this.withCredentials)},e.prototype.wO=function(t){var e=this;this.nR.promise.then((function(){t(Object.keys(e.qd.Nl))}))},e.prototype.vm=function(){return!0},e.prototype.request=function(t){var e=this;this.c$&&t.forEach((function(t){e.OR[t]||e.Jda(t)}))},e.prototype.NR=function(){},e.prototype.abort=function(){this.stream&&this.stream.abort()},e.prototype.Jda=function(t){this.trigger(h.a.Events.PART_READY,[{Ta:t,error:"Requested part not found",yh:!1,qf:!1}])},e.prototype.V$=function(t,e,s){this.OR[t]=!0,this.trigger(h.a.Events.PART_READY,[{Ta:t,data:e,yh:!1,qf:!1,error:null,Bc:s}])},e}(h.a),Object(s.a)(t),Object(s.b)(t),e["default"]=t}}])}).call(this||window);