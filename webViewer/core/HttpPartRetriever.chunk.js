(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{384:function(t,e,r){r.r(e),r.d(e,"ByteRangeRequest",(function(){return y}));var s=r(1),n=r(0);r.n(n);var i=r(2),a=r(132);t=r(84);var u=r(216),o=r(65),c=r(61),h=r(215),f=r(142);r=r(316);var l,d=[],p=[],O=window,b=function(){return function(){this.Ik=1}}();(function(t){t[t.UNSENT=0]="UNSENT",t[t.DONE=4]="DONE"})(l||(l={}));var y=function(){function t(t,e,r,s){var i=this;this.url=t,this.range=e,this.ze=r,this.withCredentials=s,this.lX=l,this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),O.Uint8Array&&(this.request.responseType="arraybuffer"),s&&(this.request.withCredentials=s),q.DISABLE_RANGE_HEADER||(Object(n.isUndefined)(e.stop)?this.request.setRequestHeader("Range","bytes="+e.start):this.request.setRequestHeader("Range",["bytes=",e.start,"-",e.stop-1].join(""))),r&&Object.keys(r).forEach((function(t){i.request.setRequestHeader(t,r[t])})),this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined"),this.status=h.a.NOT_STARTED}return t.prototype.start=function(t){var e=this,r=this.request;r.onreadystatechange=function(){if(e.aborted)return e.status=h.a.ABORTED,t({code:h.a.ABORTED});if(this.readyState===e.lX.DONE){e.sz();var s=0===window.document.URL.indexOf("file:///");200===r.status||206===r.status||s&&0===r.status?(s=O.yO(this),e.oI(s,t)):(e.status=h.a.ERROR,t({code:e.status,status:e.status}))}},this.request.send(null),this.status=h.a.STARTED},t.prototype.oI=function(t,e){if(this.status=h.a.SUCCESS,e)return e(!1,t)},t.prototype.abort=function(){this.sz(),this.aborted=!0,this.request.abort()},t.prototype.sz=function(){var e=Object(f.c)(this.url,this.range,p);if(-1!==e&&p.splice(e,1),0<d.length){e=d.shift();var r=new t(e.url,e.range,this.ze,this.withCredentials);e.request=r,p.push(e),r.start(Object(f.d)(e))}},t.prototype.extend=function(t){var e=Object.assign({},this,t.prototype);return e.constructor=t,e},t}(),q=function(t){function e(e,r,s,n,i){return s=t.call(this,e,s,n)||this,s.Lk={},s.ay=r,s.url=e,s.DISABLE_RANGE_HEADER=!1,s.mv=y,s.jJ=3,s.ze=i||{},s}return Object(s.c)(e,t),e.prototype.st=function(t,e,r){var s=-1===t.indexOf("?")?"?":"&";switch(r){case!1:case c.a.NEVER_CACHE:t=t+s+"_="+Object(n.uniqueId)();break;case!0:case c.a.CACHE:t=t+s+"_="+e.start+","+(Object(n.isUndefined)(e.stop)?"":e.stop)}return t},e.prototype.BM=function(t,e,r,s){return void 0===r&&(r={}),new this.mv(t,e,r,s)},e.prototype.V2=function(t,e,r,s,i){for(var a=0;a<d.length;a++)if(Object(n.isEqual)(d[a].range,e)&&Object(n.isEqual)(d[a].url,t))return d[a].Wf.push(s),d[a].rA++,null;for(a=0;a<p.length;a++)if(Object(n.isEqual)(p[a].range,e)&&Object(n.isEqual)(p[a].url,t))return p[a].Wf.push(s),p[a].rA++,null;return r={url:t,range:e,ay:r,Wf:[s],rA:1},0===d.length&&p.length<this.jJ?(p.push(r),r.request=this.BM(t,e,i,this.withCredentials),r):(d.push(r),null)},e.prototype.lm=function(t,e,r){var s=this.st(t,e,this.ay);return(t=this.V2(s,e,this.ay,r,this.ze))&&t.request.start(Object(f.d)(t)),function(){var t=Object(f.c)(s,e,p);if(-1!==t){var r=--p[t].rA;0===r&&p[t].request&&p[t].request.abort()}else t=Object(f.c)(s,e,d),-1!==t&&(r=--d[t].rA,0===r&&d.splice(t,1))}},e.prototype.fO=function(){return{start:-a.a}},e.prototype.u6=function(){var t=-(a.a+a.e);return{start:t-a.d,end:t}},e.prototype.Yq=function(t){var e=this;this.jy=!0;var r=a.a;this.lm(this.url,this.fO(),(function(s,n,a){function c(){var r=e.qd.aO();e.lm(e.url,r,(function(s,n){return s?(Object(i.j)("Error loading central directory: "+s),t(s)):(n=Object(o.a)(n),n.length!==r.stop-r.start?t("Invalid XOD file: Zip central directory data is wrong size! Should be "+(r.stop-r.start)+" but is "+n.length):(e.qd.ER(n),e.OD=!0,e.jy=!1,t(!1)))}))}if(s)return Object(i.j)("Error loading end header: "+s),t(s,n,a);if(n=Object(o.a)(n),n.length!==r)return t("Invalid XOD file: Zip end header data is wrong size!");try{e.qd=new u.a(n)}catch(h){return t(h)}e.qd.W7?e.lm(e.url,e.u6(),(function(r,s){if(r)return Object(i.j)("Error loading zip64 header: "+r),t(r);s=Object(o.a)(s),e.qd.n8(s),c()})):c()}))},e.prototype.wO=function(t){t(Object.keys(this.qd.Nl))},e.prototype.eH=function(t,e){var r=this;if(this.qd.uM(t)){var s=this.qd.lz(t);if(s in this.Lk){var n=this.Xg[t];n.Mp=this.Lk[s],n.Mp.Ik++,n.cancel=n.Mp.cancel}else{var a=this.qd.K4(t),u=this.lm(this.url,a,(function(n,u){n?(Object(i.j)('Error loading part "'+t+'": '+n),r.lm(r.url,a,(function(n,i){if(n)return e(n,t);r.IR(i,a,s,t,e)}))):r.IR(u,a,s,t,e)})),o=this.Xg[t];o&&(o.RT=!0,o.cancel=function(){o.Mp.Ik--,0===o.Mp.Ik&&(u(),delete r.Lk[s])},this.Lk[s]=new b(s),o.Mp=this.Lk[s],o.Mp.cancel=o.cancel)}}else delete this.Xg[t],e(Error('File not found: "'+t+'"'),t)},e.prototype.IR=function(t,e,r,s,n){if(t.length!==e.stop-e.start)n(Error("Part data is wrong size!"),s);else{do{if(!this.Lk[r])return;s=this.Lk[r].Ik;for(var i=e.Go.length,a=0;a<i;++a){var u=e.Go[a];n(!1,u.Co,t["string"===typeof t?"substring":"subarray"](u.start,u.stop),this.qd.sP(u.Co)),u.Co in this.Xg&&delete this.Xg[u.Co]}}while(s!==this.Lk[r].Ik);delete this.Lk[r]}},e.DISABLE_RANGE_HEADER=!1,e.jJ=3,e}(t.a);(function(t){function e(e,r,s){var i,a=t.call(this)||this;for(i in e)a[i]=e[i];return a.xja=e,a.startOffset=r,a.endOffset=s,a.BM=function(t,r,s,i){return Object(n.isUndefined)(r.stop)?(r.start+=a.endOffset,r.stop=a.endOffset):(r.start+=a.startOffset,r.stop+=a.startOffset),t=a.st(a.url,r,a.ay),new e.mv(t,r,s,i)},a}Object(s.c)(e,t)})(q),Object(r.a)(q),Object(r.b)(q),e["default"]=q}}])}).call(this||window);