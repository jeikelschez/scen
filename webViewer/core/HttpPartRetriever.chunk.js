(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{383:function(t,e,r){r.r(e),r.d(e,"ByteRangeRequest",(function(){return O}));var s=r(1),i=r(0);r.n(i);var n=r(2),a=r(132);t=r(84);var o=r(216),u=r(65),h=r(61),c=r(215),f=r(142);r=r(315);var l,d=[],p=[],q=window,E=function(){return function(){this.Ek=1}}();(function(t){t[t.UNSENT=0]="UNSENT",t[t.DONE=4]="DONE"})(l||(l={}));var O=function(){function t(t,e,r,s){var n=this;this.url=t,this.range=e,this.ze=r,this.withCredentials=s,this.fX=l,this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),q.Uint8Array&&(this.request.responseType="arraybuffer"),s&&(this.request.withCredentials=s),b.DISABLE_RANGE_HEADER||(Object(i.isUndefined)(e.stop)?this.request.setRequestHeader("Range","bytes="+e.start):this.request.setRequestHeader("Range",["bytes=",e.start,"-",e.stop-1].join(""))),r&&Object.keys(r).forEach((function(t){n.request.setRequestHeader(t,r[t])})),this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined"),this.status=c.a.NOT_STARTED}return t.prototype.start=function(t){var e=this,r=this.request;r.onreadystatechange=function(){if(e.aborted)return e.status=c.a.ABORTED,t({code:c.a.ABORTED});if(this.readyState===e.fX.DONE){e.qz();var s=0===window.document.URL.indexOf("file:///");200===r.status||206===r.status||s&&0===r.status?(s=q.tO(this),e.lI(s,t)):(e.status=c.a.ERROR,t({code:e.status,status:e.status}))}},this.request.send(null),this.status=c.a.STARTED},t.prototype.lI=function(t,e){if(this.status=c.a.SUCCESS,e)return e(!1,t)},t.prototype.abort=function(){this.qz(),this.aborted=!0,this.request.abort()},t.prototype.qz=function(){var e=Object(f.c)(this.url,this.range,p);if(-1!==e&&p.splice(e,1),0<d.length){e=d.shift();var r=new t(e.url,e.range,this.ze,this.withCredentials);e.request=r,p.push(e),r.start(Object(f.d)(e))}},t.prototype.extend=function(t){var e=Object.assign({},this,t.prototype);return e.constructor=t,e},t}(),b=function(t){function e(e,r,s,i,n){return s=t.call(this,e,s,i)||this,s.Hk={},s.Zx=r,s.url=e,s.DISABLE_RANGE_HEADER=!1,s.kv=O,s.fJ=3,s.ze=n||{},s}return Object(s.c)(e,t),e.prototype.rt=function(t,e,r){var s=-1===t.indexOf("?")?"?":"&";switch(r){case!1:case h.a.NEVER_CACHE:t=t+s+"_="+Object(i.uniqueId)();break;case!0:case h.a.CACHE:t=t+s+"_="+e.start+","+(Object(i.isUndefined)(e.stop)?"":e.stop)}return t},e.prototype.wM=function(t,e,r,s){return void 0===r&&(r={}),new this.kv(t,e,r,s)},e.prototype.P2=function(t,e,r,s,n){for(var a=0;a<d.length;a++)if(Object(i.isEqual)(d[a].range,e)&&Object(i.isEqual)(d[a].url,t))return d[a].Uf.push(s),d[a].qA++,null;for(a=0;a<p.length;a++)if(Object(i.isEqual)(p[a].range,e)&&Object(i.isEqual)(p[a].url,t))return p[a].Uf.push(s),p[a].qA++,null;return r={url:t,range:e,Zx:r,Uf:[s],qA:1},0===d.length&&p.length<this.fJ?(p.push(r),r.request=this.wM(t,e,n,this.withCredentials),r):(d.push(r),null)},e.prototype.im=function(t,e,r){var s=this.rt(t,e,this.Zx);return(t=this.P2(s,e,this.Zx,r,this.ze))&&t.request.start(Object(f.d)(t)),function(){var t=Object(f.c)(s,e,p);if(-1!==t){var r=--p[t].qA;0===r&&p[t].request&&p[t].request.abort()}else t=Object(f.c)(s,e,d),-1!==t&&(r=--d[t].qA,0===r&&d.splice(t,1))}},e.prototype.$N=function(){return{start:-a.a}},e.prototype.o6=function(){var t=-(a.a+a.e);return{start:t-a.d,end:t}},e.prototype.Yq=function(t){var e=this;this.hy=!0;var r=a.a;this.im(this.url,this.$N(),(function(s,i,a){function h(){var r=e.qd.WN();e.im(e.url,r,(function(s,i){return s?(Object(n.j)("Error loading central directory: "+s),t(s)):(i=Object(u.a)(i),i.length!==r.stop-r.start?t("Invalid XOD file: Zip central directory data is wrong size! Should be "+(r.stop-r.start)+" but is "+i.length):(e.qd.xR(i),e.ND=!0,e.hy=!1,t(!1)))}))}if(s)return Object(n.j)("Error loading end header: "+s),t(s,i,a);if(i=Object(u.a)(i),i.length!==r)return t("Invalid XOD file: Zip end header data is wrong size!");try{e.qd=new o.a(i)}catch(c){return t(c)}e.qd.Q7?e.im(e.url,e.o6(),(function(r,s){if(r)return Object(n.j)("Error loading zip64 header: "+r),t(r);s=Object(u.a)(s),e.qd.h8(s),h()})):h()}))},e.prototype.rO=function(t){t(Object.keys(this.qd.Ml))},e.prototype.bH=function(t,e){var r=this;if(this.qd.pM(t)){var s=this.qd.jz(t);if(s in this.Hk){var i=this.Vg[t];i.Lp=this.Hk[s],i.Lp.Ek++,i.cancel=i.Lp.cancel}else{var a=this.qd.D4(t),o=this.im(this.url,a,(function(i,o){i?(Object(n.j)('Error loading part "'+t+'": '+i),r.im(r.url,a,(function(i,n){if(i)return e(i,t);r.BR(n,a,s,t,e)}))):r.BR(o,a,s,t,e)})),u=this.Vg[t];u&&(u.HT=!0,u.cancel=function(){u.Lp.Ek--,0===u.Lp.Ek&&(o(),delete r.Hk[s])},this.Hk[s]=new E(s),u.Lp=this.Hk[s],u.Lp.cancel=u.cancel)}}else delete this.Vg[t],e(Error('File not found: "'+t+'"'),t)},e.prototype.BR=function(t,e,r,s,i){if(t.length!==e.stop-e.start)i(Error("Part data is wrong size!"),s);else{do{if(!this.Hk[r])return;s=this.Hk[r].Ek;for(var n=e.Eo.length,a=0;a<n;++a){var o=e.Eo[a];i(!1,o.Bo,t["string"===typeof t?"substring":"subarray"](o.start,o.stop),this.qd.kP(o.Bo)),o.Bo in this.Vg&&delete this.Vg[o.Bo]}}while(s!==this.Hk[r].Ek);delete this.Hk[r]}},e.DISABLE_RANGE_HEADER=!1,e.fJ=3,e}(t.a);(function(t){function e(e,r,s){var n,a=t.call(this)||this;for(n in e)a[n]=e[n];return a.pja=e,a.startOffset=r,a.endOffset=s,a.wM=function(t,r,s,n){return Object(i.isUndefined)(r.stop)?(r.start+=a.endOffset,r.stop=a.endOffset):(r.start+=a.startOffset,r.stop+=a.startOffset),t=a.rt(a.url,r,a.Zx),new e.kv(t,r,s,n)},a}Object(s.c)(e,t)})(b),Object(r.a)(b),Object(r.b)(b),e["default"]=b}}])}).call(this||window);