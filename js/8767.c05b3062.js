(globalThis["webpackChunktest"]=globalThis["webpackChunktest"]||[]).push([[8767],{93899:(e,t,s)=>{"use strict";function a(e,t,s,a,i,o){return null}s.d(t,{A:()=>c});var i=s(45022),o=s(80660),l=s(14907);const n={setup(){const e=(0,l.A)();return{errorDelServidor(){this.$emit("resetLoading"),e.notify({message:this.error,color:"red"})},añadidoConExito(){e.notify({message:"Agregado exitosamente",color:"green"})},editadoConExito(){e.notify({message:"Editado exitosamente",color:"green"})},eliminadoConExito(){e.notify({message:"Eliminado exitosamente",color:"green"})}}},methods:{getData:function(e,t,s,a={headers:{}}){a.headers.Authorization=`Bearer ${i.A.getItem("token")}`,o.api.get(e,a).then((e=>{this.$emit(t,e.data,s)})).catch((e=>{e.response&&(this.error=e.response.data.message),this.errorDelServidor(),this.$emit("resetLoading")}))},createData:function(e,t,s,a={headers:{}}){a.headers.Authorization=`Bearer ${i.A.getItem("token")}`,o.api.post(e,t,a).then((e=>{(e.status=200)&&(this.$emit(s),this.añadidoConExito())})).catch((e=>{e.response&&(this.error=e.response.data.message),this.errorDelServidor(),this.$emit("resetLoading")}))},putData:function(e,t,s,a={headers:{}}){a.headers.Authorization=`Bearer ${i.A.getItem("token")}`,o.api.put(e,t,a).then((e=>{(e.status=200)&&(this.$emit(s),this.editadoConExito())})).catch((e=>{e.response&&(this.error=e.response.data.message),this.errorDelServidor()}))},deleteData:function(e,t,s={headers:{}}){s.headers.Authorization=`Bearer ${i.A.getItem("token")}`,o.api.delete(e,s).then((e=>{(e.status=200)&&(this.$emit(t),this.eliminadoConExito())})).catch((e=>{e.response&&(this.error=e.response.data.message),this.errorDelServidor(),this.$emit("resetLoading")}))},login:function(e,t,s,a={headers:{}}){a.headers.Authorization=`Bearer ${i.A.getItem("token")}`,o.api.post(e,t,a).then((e=>{(e.status=200)&&this.$emit(s,e.data)})).catch((e=>{e.response&&(this.error=e.response.data.message),this.errorDelServidor()}))}}};var r=s(12807);const d=(0,r.A)(n,[["render",a]]),c=d},99565:(e,t,s)=>{"use strict";function a(e,t,s,a,i,o){return null}s.d(t,{A:()=>c});var i=s(14907),o=s(85038),l=s.n(o);const n={name:"rules",setup(){(0,i.A)()},methods:{isReq(e,t=!1){if(null==e||""==e.trim())return!1!==t?t:"Valor Requerido"},isReqCurrency(e,t=!1){if(null==e||""==e.trim()||"0,00"==e.trim()||"0"==e.trim())return!1!==t?t:"Valor Requerido"},isReqCurrencyWithZero(e,t=!1){if(null==e||""==e.trim())return!1!==t?t:"Valor Requerido"},isReqSelect(e,t=!1){if(null==e||e==[]||""==e)return!1!==t?t:"Valor Requerido"},isMax(e,t,s=!1){if(null!==e&&""!==e&&e.length>t)return!1!==s?s:`Maximo ${t} Caracteres`},isMin(e,t,s=!1){if(null!==e&&""!==e&&e.length<t)return!1!==s?s:`Minimo ${t} Caracteres`},checkDate(e,t=!1){if(0==l()(e,"DD/MM/YYYY",!0)._isValid)return!1!==t?t:"Fecha Invalida"},checkHour(e,t=!1){if(0==l()(e,"HH:mm",!0)._isValid)return!1!==t?t:"Hora Invalida"}}};var r=s(12807);const d=(0,r.A)(n,[["render",a]]),c=d},55302:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(61758);const i={id:"WebViewer",ref:"viewer",style:{width:"600px",height:"600px"}};function o(e,t,s,o,l,n){return(0,a.uX)(),(0,a.CE)("div",i,null,512)}s(10239),s(33186),s(45531),s(15683),s(9048),s(64702);var l=s(38734),n=s(82429),r=s.n(n);const d={name:"webViewer",data:function(){return{confirmPrint:!1}},setup(){const e=(0,l.KR)(null);return{viewer:e}},methods:{base64ToBlob(e){const t=window.atob(e),s=t.length,a=new Uint8Array(s);for(let i=0;i<s;++i)a[i]=t.charCodeAt(i);return new Blob([a],{type:"application/pdf"})},async until(e){const t=s=>{e()?s():setTimeout((e=>t(s)),400)};return new Promise(t)},showpdf(e,t,s=!1,a=!0,i){const o="https://scen.rcsexpress.com/webViewer";r()({path:o,licenseKey:"atkUT8UOiniAvAWUG1rN"},this.viewer).then((o=>{o.UI.disableElements(["panToolButton"]),o.UI.disableElements(["textSelectButton"]),o.UI.setHeaderItems((e=>{e.push({type:"actionButton",title:"Descargar",img:"icon-header-download",onClick:()=>{o.UI.downloadPdf()}}),e.push({type:"actionButton",title:"Exportar Excel",img:"../../icons/icone-excel-grise.png",onClick:()=>{this.$emit("exportExcel")}}),e.push({type:"actionButton",title:"Imprimir",img:"icon-header-print-line",onClick:async()=>{s&&(this.$emit("printPdf"),await this.until((e=>this.confirmPrint)),"false"==this.confirmPrint)||(o.UI.print(),this.confirmPrint=!1)}}),a&&e.push({type:"actionButton",title:"Cerrar",img:"icon-close",onClick:()=>{this.$emit("closePdf")}})})),i?o.UI.loadDocument(this.base64ToBlob(i),{filename:"REPORTE SCEN.pdf"}):o.UI.loadDocument(`https://scen.rcsexpress.com/api/v1/pdfreports/loadPDF/${e}`),o.UI.setLanguage("es"),o.UI.useEmbeddedPrint(!0),setTimeout((()=>{o.UI.setZoomLevel(t||.7)}),2e3)}))}}};var c=s(12807);const u=(0,c.A)(d,[["render",o]]),m=u},20186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ae});var a=s(61758),i=s(29104),o=s(58790);const l={class:"row"},n={class:"col-md-12 col-xs-12"},r={class:"col-md-12 col-xs-12"},d={class:"row justify-center items-center content-center"},c={class:"q-pa-sm justify-center"},u={class:"row justify-end q-pa-md col-md-12 col-xl-12 col-lg-12 col-xs-12 col-sm-12"},m=(0,a.Lk)("div",{class:"col-md-3 col-xl-2 col-lg-2 col-xs-12 col-sm-12 movilTitle",style:{"align-self":"center","text-align":"center"}},[(0,a.Lk)("p",{style:{"font-size":"20px"},class:"text-secondary"},[(0,a.Lk)("strong",null,"VENTAS - EMITIR CARTA A CLIENTES")])],-1),h={class:"col-md-3 col-xl-3 col-lg-3 col-xs-12 col-sm-12 cardMargin selectMobile2",style:{"align-self":"center","text-align":"center"}},p={class:"col-md-2 col-xl-2 col-lg-2 col-xs-12 col-sm-12 cardMargin selectMobile2",style:{"align-self":"center","text-align":"center"}},g={class:"col-md-2 col-xl-2 col-lg-2 col-xs-12 col-sm-12 cardMargin selectMobile2",style:{"align-self":"center","text-align":"center"}},f={class:"col-md-1 col-xl-1 col-lg-1 col-xs-12 col-sm-12 cardMargin selectMobile2",style:{"align-self":"center","text-align":"center"}},b={class:"q-gutter-md"},_={class:"col-md-2 col-xl-2 col-lg-2 col-xs-12 col-sm-12 selectMobile2",style:{"align-self":"center","text-align":"center"}},j={class:"col-md-2 col-xl-2 col-lg-2 col-xs-12 col-sm-12",style:{"align-self":"center","text-align":"center"}},k={class:"q-pa-md q-gutter-y-md",style:{"margin-top":"-30px"}};function y(e,t,s,y,v,D){const x=(0,a.g2)("q-icon"),w=(0,a.g2)("q-input"),C=(0,a.g2)("q-btn"),A=(0,a.g2)("q-form"),F=(0,a.g2)("q-card-section"),V=(0,a.g2)("q-card"),M=(0,a.g2)("q-dialog"),Y=(0,a.g2)("q-item-section"),S=(0,a.g2)("q-item"),q=(0,a.g2)("q-select"),$=(0,a.g2)("q-date"),T=(0,a.g2)("q-popup-proxy"),z=(0,a.g2)("q-tooltip"),I=(0,a.g2)("q-btn-toggle"),U=(0,a.g2)("q-inner-loading"),L=(0,a.g2)("q-td"),E=(0,a.g2)("q-item-label"),P=(0,a.g2)("q-list"),Q=(0,a.g2)("q-table"),W=(0,a.g2)("webViewer"),N=(0,a.g2)("methods"),R=(0,a.g2)("rules-vue"),B=(0,a.g2)("q-page"),K=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(B,{class:"pagina q-pa-md"},{default:(0,a.k6)((()=>[(0,a.bF)(M,{modelValue:y.dialog,"onUpdate:modelValue":t[5]||(t[5]=e=>y.dialog=e)},{default:(0,a.k6)((()=>[(0,a.bF)(V,{class:"q-pa-md",bordered:"",style:{width:"900px","max-width":"80vw"}},{default:(0,a.k6)((()=>[(0,a.bF)(F,null,{default:(0,a.k6)((()=>[(0,a.bF)(A,{class:"q-gutter-md",onSubmit:t[4]||(t[4]=e=>y.pdfView=!0)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",l,[(0,a.Lk)("div",n,[(0,a.bF)(w,{"upper-case":"",outlined:"",modelValue:v.form.contacto,"onUpdate:modelValue":[t[0]||(t[0]=e=>v.form.contacto=e),t[1]||(t[1]=e=>v.form.contacto=v.form.contacto.toUpperCase())],label:"Contacto",hint:"","lazy-rules":"",rules:[e=>this.$refs.rulesVue.isMin(e,3),e=>this.$refs.rulesVue.isMax(e,100)]},{prepend:(0,a.k6)((()=>[(0,a.bF)(x,{name:"pin_drop"})])),_:1},8,["modelValue","rules"])]),(0,a.Lk)("div",r,[(0,a.bF)(w,{"upper-case":"",outlined:"",modelValue:v.form.cargo,"onUpdate:modelValue":[t[2]||(t[2]=e=>v.form.cargo=e),t[3]||(t[3]=e=>v.form.cargo=v.form.cargo.toUpperCase())],label:"Cargo",hint:"","lazy-rules":"",rules:[e=>this.$refs.rulesVue.isMin(e,3),e=>this.$refs.rulesVue.isMax(e,100)]},{prepend:(0,a.k6)((()=>[(0,a.bF)(x,{name:"pin_drop"})])),_:1},8,["modelValue","rules"])])]),(0,a.Lk)("div",d,[(0,a.bF)(C,{label:"Imprimir",type:"submit",color:"primary",class:"col-md-5 col-sm-5 col-xs-12",icon:"print"}),(0,a.bo)((0,a.bF)(C,{label:"Cerrar",color:"primary",flat:"",class:"col-md-5 col-sm-5 col-xs-12 btnmovil",icon:"close"},null,512),[[K]])])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[m,(0,a.Lk)("div",h,[(0,a.bF)(q,{rounded:"",dense:"","transition-show":"flip-up","transition-hide":"flip-down",options:v.agenciasSelected,onFilter:t[6]||(t[6]=(e,t)=>D.filterArray(e,t,"agenciasSelected","agencias","nb_agencia")),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","option-label":"nb_agencia","option-value":"id",modelValue:v.selectedAgencia,"onUpdate:modelValue":[t[7]||(t[7]=e=>v.selectedAgencia=e),t[8]||(t[8]=e=>D.getDataClientes())],outlined:"",standout:"",label:"Agencia"},{"no-option":(0,a.k6)((()=>[(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bF)(Y,{class:"text-grey"},{default:(0,a.k6)((()=>[(0,a.eW)(" Sin resultados ")])),_:1})])),_:1})])),prepend:(0,a.k6)((()=>[(0,a.bF)(x,{name:"search"})])),_:1},8,["options","modelValue"])]),(0,a.Lk)("div",p,[(0,a.bF)(w,{outlined:"",label:"Fecha Desde",hint:"",dense:"",rounded:"",style:{"padding-bottom":"0px"},modelValue:v.fecha_desde,"onUpdate:modelValue":t[13]||(t[13]=e=>v.fecha_desde=e),"lazy-rules":"",mask:"##/##/####",rules:[e=>this.$refs.rulesVue.checkDate(e)],onBlur:t[14]||(t[14]=e=>D.getDataClientes()),onKeyup:t[15]||(t[15]=(0,i.jR)((e=>D.getDataClientes()),["enter"]))},{append:(0,a.k6)((()=>[(0,a.bF)(x,{name:"event",class:"cursor-pointer"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{ref:"qDateProxy1","transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)($,{modelValue:v.fecha_desde,"onUpdate:modelValue":[t[9]||(t[9]=e=>v.fecha_desde=e),t[12]||(t[12]=e=>{D.getDataClientes(),this.$refs.qDateProxy1.hide()})],mask:"DD/MM/YYYY",style:{"padding-bottom":"0px"},onBlur:t[10]||(t[10]=e=>D.getDataClientes()),onKeyup:t[11]||(t[11]=(0,i.jR)((e=>D.getDataClientes()),["enter"]))},null,8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"])]),(0,a.Lk)("div",g,[(0,a.bF)(w,{outlined:"",label:"Fecha Hasta",hint:"",dense:"",rounded:"",style:{"padding-bottom":"0px"},modelValue:v.fecha_hasta,"onUpdate:modelValue":t[20]||(t[20]=e=>v.fecha_hasta=e),"lazy-rules":"",mask:"##/##/####",rules:[e=>this.$refs.rulesVue.checkDate(e)],onBlur:t[21]||(t[21]=e=>D.getDataClientes()),onKeyup:t[22]||(t[22]=(0,i.jR)((e=>D.getDataClientes()),["enter"]))},{append:(0,a.k6)((()=>[(0,a.bF)(x,{name:"event",class:"cursor-pointer"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{ref:"qDateProxy2","transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)($,{modelValue:v.fecha_hasta,"onUpdate:modelValue":[t[16]||(t[16]=e=>v.fecha_hasta=e),t[19]||(t[19]=e=>{D.getDataClientes(),this.$refs.qDateProxy2.hide()})],mask:"DD/MM/YYYY",style:{"padding-bottom":"0px"},onBlur:t[17]||(t[17]=e=>D.getDataClientes()),onKeyup:t[18]||(t[18]=(0,i.jR)((e=>D.getDataClientes()),["enter"]))},null,8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"])]),(0,a.Lk)("div",f,[(0,a.Lk)("div",b,[(0,a.bF)(I,{modelValue:v.selectedTipo,"onUpdate:modelValue":[t[23]||(t[23]=e=>v.selectedTipo=e),t[24]||(t[24]=e=>D.getDataClientes())],spread:"",class:"my-custom-toggle",rounded:"",unelevated:"","toggle-color":"primary",color:"white","text-color":"black",options:v.tipos},{clte:(0,a.k6)((()=>[(0,a.bF)(z,{class:"bg-primary",style:{"max-height":"30px"},"transition-show":"scale","transition-hide":"scale",color:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("Clientes ")])),_:1})])),part:(0,a.k6)((()=>[(0,a.bF)(z,{class:"bg-primary",style:{"max-height":"30px"},"transition-show":"scale","transition-hide":"scale",color:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("Particulares ")])),_:1})])),_:1},8,["modelValue","options"])])]),(0,a.Lk)("div",_,[(0,a.bF)(q,{rounded:"",dense:"","transition-show":"flip-up","transition-hide":"flip-down",options:v.clientesSelected,onFilter:t[25]||(t[25]=(e,t)=>D.filterArray(e,t,"clientesSelected","C"==this.selectedTipo?"clientes":"cparticulares","nb_cliente")),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0","option-label":"nb_cliente","option-value":"id",modelValue:v.selectedCliente,"onUpdate:modelValue":[t[26]||(t[26]=e=>v.selectedCliente=e),t[27]||(t[27]=e=>D.getDataTable())],loading:v.clientesLoading,disable:v.clientesLoading,outlined:"",standout:"",label:"Cliente"},{"no-option":(0,a.k6)((()=>[(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bF)(Y,{class:"text-grey"},{default:(0,a.k6)((()=>[(0,a.eW)(" Sin resultados ")])),_:1})])),_:1})])),prepend:(0,a.k6)((()=>[(0,a.bF)(x,{name:"search"})])),clientesLoading:(0,a.k6)((()=>[(0,a.bF)(U,{showing:"",color:"primary",class:"loading"})])),_:1},8,["options","modelValue","loading","disable"])]),(0,a.Lk)("div",j,[(0,a.bF)(C,{dense:"",color:"primary",round:"",padding:"sm",onClick:t[28]||(t[28]=e=>this.resetFilters()),style:{"margin-right":"15px"}},{default:(0,a.k6)((()=>[(0,a.bF)(x,{size:"25px",name:"filter_alt_off",color:"white"}),(0,a.bF)(z,{class:"bg-primary",style:{"max-height":"30px"},"transition-show":"scale","transition-hide":"scale",color:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("Eliminar Filtros")])),_:1})])),_:1}),(0,a.bF)(C,{dense:"",color:"primary",round:"",padding:"sm",style:{"margin-right":"5px"},disabled:!(this.guias.length>0),onClickCapture:t[29]||(t[29]=e=>this.dialog=!0)},{default:(0,a.k6)((()=>[(0,a.bF)(x,{size:"25px",name:"print",color:"white"}),(0,a.bF)(z,{class:"bg-primary",style:{"max-height":"30px"},"transition-show":"scale","transition-hide":"scale",color:"primary"},{default:(0,a.k6)((()=>[(0,a.eW)("Imprimir Carta")])),_:1})])),_:1},8,["disabled"])])])]),(0,a.Lk)("div",k,[(0,a.bF)(Q,{rows:v.guias,"binary-state-sort":"","row-key":"id",columns:v.columns,loading:y.loading,class:"tableHeight",selection:"multiple",separator:y.separator,grid:e.$q.screen.xs,"rows-per-page-options":[0],pagination:y.pagination,style:{width:"100%",height:"590px"},"hide-bottom":"",selected:y.selected,"onUpdate:selected":t[30]||(t[30]=e=>y.selected=e)},{loading:(0,a.k6)((()=>[(0,a.bF)(U,{showing:"",color:"primary",class:"loading"})])),"body-cell-nro_documento":(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(D.buildNroDoc("nro_documento",e.row)),1)])),_:2},1032,["props"])])),"body-cell-nro_fact":(0,a.k6)((e=>[(0,a.bF)(L,{props:e},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(D.buildNroDoc("nro_fact",e.row)),1)])),_:2},1032,["props"])])),"body-cell-observacion_adic":(0,a.k6)((e=>[(0,a.bF)(L,{props:e,style:{"padding-top":"30px"}},{default:(0,a.k6)((()=>[(0,a.bF)(w,{outlined:"",modelValue:e.row.observacion_adic,"onUpdate:modelValue":t=>e.row.observacion_adic=t,dense:"",hint:"",rules:[e=>this.$refs.rulesVue.isMax(e,100),e=>this.$refs.rulesVue.isMin(e,3)],"lazy-rules":""},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1032,["props"])])),item:(0,a.k6)((e=>[(0,a.Lk)("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:(0,o.Tr)(e.selected?"transform: scale(0.95);":"")},[(0,a.bF)(V,{class:(0,o.C4)(e.selected?"bg-grey-2":"")},{default:(0,a.k6)((()=>[(0,a.bF)(P,{dense:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cols,(t=>((0,a.uX)(),(0,a.Wv)(S,{key:t.name},{default:(0,a.k6)((()=>[(0,a.bF)(Y,null,{default:(0,a.k6)((()=>[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.label),1)])),_:2},1024)])),_:2},1024),"nro_documento"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:0,side:"",class:"itemMovilSide"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(D.buildNroDoc("nro_documento",e.row)),1)])),_:2},1024)):(0,a.Q3)("",!0),"nro_fact"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:1,side:"",class:"itemMovilSide"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(D.buildNroDoc("nro_fact",e.row)),1)])),_:2},1024)):(0,a.Q3)("",!0),"fecha_emision"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:2,side:"",class:"itemMovilSide"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.fecha_emision),1)])),_:2},1024)):(0,a.Q3)("",!0),"monto_total"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:3,side:"",class:"itemMovilSide"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.monto_total),1)])),_:2},1024)):(0,a.Q3)("",!0),"observacion_entrega"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:4,side:"",class:"itemMovilSide",style:{"text-align":"right !important"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.row.observacion_entrega),1)])),_:2},1024)):(0,a.Q3)("",!0),"observacion_adic"===t.name?((0,a.uX)(),(0,a.Wv)(Y,{key:5,side:"",class:"itemMovilSide",style:{"text-align":"right !important","align-self":"center"}},{default:(0,a.k6)((()=>[(0,a.bF)(w,{outlined:"",modelValue:e.row.observacion_adic,"onUpdate:modelValue":t=>e.row.observacion_adic=t,dense:"",hint:"",rules:[e=>this.$refs.rulesVue.isMax(e,100),e=>this.$refs.rulesVue.isMin(e,3)],"lazy-rules":"","hide-bottom-space":"",style:{"padding-top":"20px"}},null,8,["modelValue","onUpdate:modelValue","rules"])])),_:2},1024)):(0,a.Q3)("",!0)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class"])],4)])),_:1},8,["rows","columns","loading","separator","grid","pagination","selected"])]),(0,a.bF)(M,{modelValue:y.pdfView,"onUpdate:modelValue":t[32]||(t[32]=e=>y.pdfView=e),onShow:t[33]||(t[33]=e=>this.print())},{default:(0,a.k6)((()=>[(0,a.bF)(W,{ref:"webViewer",onClosePdf:t[31]||(t[31]=e=>this.pdfView=!1),style:{width:"1000px",height:"750px","max-width":"1000px"}},null,512)])),_:1},8,["modelValue"]),(0,a.bF)(N,{ref:"methods",onSetData:D.setData,onGetDataClientes:D.getDataClientes,onSetDataClientes:D.setDataClientes,onGetDataTable:D.getDataTable,onSetDataTable:D.setDataTable,onSetDataPermisos:D.setDataPermisos},null,8,["onSetData","onGetDataClientes","onSetDataClientes","onGetDataTable","onSetDataTable","onSetDataPermisos"]),(0,a.bF)(R,{ref:"rulesVue"},null,512)])),_:1})}s(10239);var v=s(38734),D=s(80660),x=s(99565),w=s(85038),C=s.n(w),A=s(14907),F=s(45022),V=s(93899),M=s(55302);const Y={components:{methods:V.A,webViewer:M.A,rulesVue:x.A},data(){return{columns:[{name:"nro_documento",label:"N° Control",field:"nro_documento",align:"left",sortable:!0},{name:"nro_fact",label:"N° Fact.",field:"nro_fact",align:"left"},{name:"fecha_emision",label:"Emisión",field:"fecha_emision",align:"left",sortable:!0},{name:"monto_total",label:"Monto Total",field:"monto_total",align:"right",sortable:!0,format:e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",currencyDisplay:"code"}).format(e).replace("EUR","").trim()},{name:"observacion_entrega",label:"Descripción",field:"observacion_entrega",align:"left"},{name:"observacion_adic",label:"Observación Adicional",field:"observacion_adic",align:"left"}],form:{contacto:"",cargo:""},tipos:[{label:"Clte",value:"C",slot:"clte"},{label:"Part",value:"P",slot:"part"}],guias:[],guiasAll:[],agencias:[],rpermisos:[],clientes:[],agenciasSelected:[],clientesSelected:[],selectedAgencia:[],selectedCliente:[],selectedTipo:"C",fecha_desde:C()().subtract(7,"days").format("DD/MM/YYYY"),fecha_hasta:C()().format("DD/MM/YYYY"),clientesLoading:!1}},setup(){(0,A.A)();return{loading:(0,v.KR)(!1),separator:(0,v.KR)("vertical"),dialog:(0,v.KR)(!1),selected:(0,v.KR)([]),pdfView:(0,v.KR)(!1),pagination:{page:1,rowsPerPage:0}}},mounted(){this.$emit("changeTitle","SCEN - Ventas - Emitir Carta de Cliente",""),this.$refs.methods.getData("/agencias","setData","agencias",{headers:{order_by:"nb_agencia",order_direction:"ASC"}}),this.$refs.methods.getData("/rpermisos","setDataPermisos","rpermisos",{headers:{rol:F.A.getItem("tokenTraducido").usuario.roles.id,menu:"emitircarta"}})},methods:{filterArray(e,t,s,a,i){t(""!==e?()=>{const t=e.toUpperCase();for(var o=[],l=0;l<=this[a].length-1;l++)if(this[a][l][i].indexOf(t)>-1&&o.push(this[a][l]),l==this[a].length-1){this[s]=o;break}}:()=>{this[s]=this[a]})},findIndex(e,t,s){var a=this[e].findIndex((e=>e.id==t));return a>=0?this[e][a][s]:null},allowOption(e){return this.rpermisos.findIndex((t=>t.acciones.accion==e))<0},setDataPermisos(e,t){this[t]=e,this.rpermisos.findIndex((e=>1==e.acciones.accion))<0&&this.$router.push("/error403")},setData(e,t){this[t]=e.data},getDataClientes(){this.guias=[],this.selected=[],this.clientes=[],this.selectedCliente=[],this.$refs.methods.getData("/mmovimientos","setDataClientes","guiasAll",{headers:{filters:JSON.stringify({agencia:this.selectedAgencia.id?this.selectedAgencia.id:"",desde:C()(this.fecha_desde,"DD/MM/YYYY").format("YYYY-MM-DD"),hasta:C()(this.fecha_hasta,"DD/MM/YYYY").format("YYYY-MM-DD"),cliente_orig_exist:"C"==this.selectedTipo?"S":"",cliente_part_exist:"C"==this.selectedTipo?"":"S",tipo_in:"FA,NC,ND",estatus_admin_ex:"A"})}})},async setDataClientes(e,t){if(this[t]=e.data?e.data:e,0==this.guiasAll.length){var s="C"==this.selectedTipo?"Cliente":"Particular";this.errorMessage("No se han emitido Facturas a ningun "+s+" en este período de Tiempo!!")}else{this.clientesLoading=!0;for(var a=[],i=0;i<=this.guiasAll.length-1;i++)if(a.indexOf(this.guiasAll[i].cod_cliente_org)<0){a.push(this.guiasAll[i].cod_cliente_org);var o="C"==this.selectedTipo?"/clientes":"/cparticulares";await D.api.get(`${o}/${this.guiasAll[i].cod_cliente_org}`,{headers:{Authorization:`Bearer ${F.A.getItem("token")}`}}).then((e=>{this.clientes.push(e.data)}))}this.clientesLoading=!1}},getDataTable(){this.selectedCliente.id&&(this.loading=!0,this.$refs.methods.getData("/mmovimientos","setDataTable","guias",{headers:{filters:JSON.stringify({agencia:this.selectedAgencia.id?this.selectedAgencia.id:"",cliente_orig:this.selectedCliente.id?this.selectedCliente.id:"",desde:C()(this.fecha_desde,"DD/MM/YYYY").format("YYYY-MM-DD"),hasta:C()(this.fecha_hasta,"DD/MM/YYYY").format("YYYY-MM-DD"),tipo_in:"FA,NC,ND",estatus_admin_ex:"A"})}}))},setDataTable(e,t){this[t]=e.data?e.data:e,this.selected=this.guias,this.loading=!1},buildNroDoc(e,t){var s="";switch(e){case"nro_documento":"FA"==t.t_de_documento?(s="FA-",t.nro_control?t.nro_control_new?t.serie_documento?s+=t.serie_documento+" - "+t.nro_control_new.padStart(9,"00-000000"):s+=t.nro_control_new.padStart(9,"00-000000"):s+=t.nro_control.padStart(4,"0000"):s+=t.serie_documento+" - "+t.nro_documento):(s="GC-",s+=t.nro_documento);break;case"nro_fact":"FA"==t.t_de_documento&&(s=t.nro_control?t.nro_control.padStart(4,"0000"):t.serie_documento+" - "+t.nro_documento);break;default:break}return s},resetFilters(){this.guias=[],this.selected=[],this.clientes=[],this.selectedCliente=[],this.selectedTipo="C",this.selectedAgencia=[],this.fecha_desde=C()().subtract(7,"days").format("DD/MM/YYYY"),this.fecha_hasta=C()().format("DD/MM/YYYY")},print(){var e=[];this.dialog=!1;for(var t=0;t<=this.selected.length-1;t++)e.push(this.selected[t].id+"/"+(this.selected[t].observacion_adic?this.selected[t].observacion_adic.toUpperCase():""));D.api.get("/pdfreports/cartaCliente",{headers:{Authorization:`Bearer ${F.A.getItem("token")}`,data:e,cliente:this.selectedCliente.nb_cliente,contacto:this.form.contacto,cargo:this.form.cargo,ciudad:this.selectedAgencia.ciudades.desc_ciudad,usuario:F.A.getItem("tokenTraducido").usuario.nombre}}).then((e=>{if(!e.data.validDoc)return this.$q.notify({message:"No existen registros para este conjunto de Filtos",color:"red"}),this.resetForm(),void(this.pdfView=!1);this.$refs.webViewer.showpdf(e.data.pdfPath,1.3)})).catch((e=>{this.$q.notify({message:e.message,color:"red"}),this.resetForm(),this.pdfView=!1}))},resetForm(){this.form.contacto="",this.form.cargo=""},errorMessage(e){this.$q.notify({message:e,color:"red"})}}};var S=s(12807),q=s(77716),$=s(82156),T=s(23316),z=s(44189),I=s(49200),U=s(67837),L=s(50492),E=s(56384),P=s(94940),Q=s(90124),W=s(25173),N=s(48975),R=s(93692),B=s(76939),K=s(97410),O=s(39035),X=s(84191),H=s(45262),G=s(53999),J=s(13796),Z=s(88672),ee=s(98582),te=s.n(ee);const se=(0,S.A)(Y,[["render",y]]),ae=se;te()(Y,"components",{QPage:q.A,QDialog:$.A,QCard:T.A,QCardSection:z.A,QForm:I.A,QInput:U.A,QIcon:L.A,QBtn:E.A,QSelect:P.A,QItem:Q.A,QItemSection:W.A,QPopupProxy:N.A,QDate:R.A,QBtnToggle:B.A,QTooltip:K.A,QInnerLoading:O.A,QTable:X.A,QTd:H.A,QList:G.A,QItemLabel:J.A}),te()(Y,"directives",{ClosePopup:Z.A})},35358:(e,t,s)=>{var a={"./af":78188,"./af.js":78188,"./ar":50096,"./ar-dz":28495,"./ar-dz.js":28495,"./ar-kw":85891,"./ar-kw.js":85891,"./ar-ly":13194,"./ar-ly.js":13194,"./ar-ma":42195,"./ar-ma.js":42195,"./ar-ps":17084,"./ar-ps.js":17084,"./ar-sa":29393,"./ar-sa.js":29393,"./ar-tn":21867,"./ar-tn.js":21867,"./ar.js":50096,"./az":43224,"./az.js":43224,"./be":61330,"./be.js":61330,"./bg":85096,"./bg.js":85096,"./bm":28746,"./bm.js":28746,"./bn":29303,"./bn-bd":56554,"./bn-bd.js":56554,"./bn.js":29303,"./bo":30528,"./bo.js":30528,"./br":35499,"./br.js":35499,"./bs":29828,"./bs.js":29828,"./ca":35855,"./ca.js":35855,"./cs":68481,"./cs.js":68481,"./cv":1694,"./cv.js":1694,"./cy":98903,"./cy.js":98903,"./da":95908,"./da.js":95908,"./de":85528,"./de-at":21732,"./de-at.js":21732,"./de-ch":54146,"./de-ch.js":54146,"./de.js":85528,"./dv":81313,"./dv.js":81313,"./el":20138,"./el.js":20138,"./en-au":78067,"./en-au.js":78067,"./en-ca":82545,"./en-ca.js":82545,"./en-gb":50124,"./en-gb.js":50124,"./en-ie":6107,"./en-ie.js":6107,"./en-il":13196,"./en-il.js":13196,"./en-in":1654,"./en-in.js":1654,"./en-nz":79557,"./en-nz.js":79557,"./en-sg":35451,"./en-sg.js":35451,"./eo":21591,"./eo.js":21591,"./es":36843,"./es-do":61009,"./es-do.js":61009,"./es-mx":75169,"./es-mx.js":75169,"./es-us":37224,"./es-us.js":37224,"./es.js":36843,"./et":77058,"./et.js":77058,"./eu":61297,"./eu.js":61297,"./fa":46658,"./fa.js":46658,"./fi":75674,"./fi.js":75674,"./fil":45204,"./fil.js":45204,"./fo":74428,"./fo.js":74428,"./fr":80703,"./fr-ca":27812,"./fr-ca.js":27812,"./fr-ch":9411,"./fr-ch.js":9411,"./fr.js":80703,"./fy":89738,"./fy.js":89738,"./ga":21235,"./ga.js":21235,"./gd":96032,"./gd.js":96032,"./gl":16424,"./gl.js":16424,"./gom-deva":53793,"./gom-deva.js":53793,"./gom-latn":14714,"./gom-latn.js":14714,"./gu":33383,"./gu.js":33383,"./he":46660,"./he.js":46660,"./hi":37264,"./hi.js":37264,"./hr":63201,"./hr.js":63201,"./hu":35604,"./hu.js":35604,"./hy-am":61067,"./hy-am.js":61067,"./id":19262,"./id.js":19262,"./is":53423,"./is.js":53423,"./it":73038,"./it-ch":23512,"./it-ch.js":23512,"./it.js":73038,"./ja":87558,"./ja.js":87558,"./jv":86071,"./jv.js":86071,"./ka":95927,"./ka.js":95927,"./kk":62625,"./kk.js":62625,"./km":25499,"./km.js":25499,"./kn":79486,"./kn.js":79486,"./ko":89405,"./ko.js":89405,"./ku":77155,"./ku-kmr":92516,"./ku-kmr.js":92516,"./ku.js":77155,"./ky":13647,"./ky.js":13647,"./lb":42837,"./lb.js":42837,"./lo":91474,"./lo.js":91474,"./lt":96967,"./lt.js":96967,"./lv":48297,"./lv.js":48297,"./me":1545,"./me.js":1545,"./mi":2573,"./mi.js":2573,"./mk":77259,"./mk.js":77259,"./ml":33826,"./ml.js":33826,"./mn":45368,"./mn.js":45368,"./mr":30860,"./mr.js":30860,"./ms":96947,"./ms-my":99418,"./ms-my.js":99418,"./ms.js":96947,"./mt":76906,"./mt.js":76906,"./my":71837,"./my.js":71837,"./nb":24503,"./nb.js":24503,"./ne":31286,"./ne.js":31286,"./nl":17981,"./nl-be":58103,"./nl-be.js":58103,"./nl.js":17981,"./nn":19387,"./nn.js":19387,"./oc-lnc":30803,"./oc-lnc.js":30803,"./pa-in":66742,"./pa-in.js":66742,"./pl":30075,"./pl.js":30075,"./pt":81731,"./pt-br":23352,"./pt-br.js":23352,"./pt.js":81731,"./ro":21776,"./ro.js":21776,"./ru":5746,"./ru.js":5746,"./sd":74100,"./sd.js":74100,"./se":38395,"./se.js":38395,"./si":8823,"./si.js":8823,"./sk":39385,"./sk.js":39385,"./sl":3852,"./sl.js":3852,"./sq":3247,"./sq.js":3247,"./sr":64290,"./sr-cyrl":26189,"./sr-cyrl.js":26189,"./sr.js":64290,"./ss":32177,"./ss.js":32177,"./sv":49038,"./sv.js":49038,"./sw":9741,"./sw.js":9741,"./ta":86932,"./ta.js":86932,"./te":95784,"./te.js":95784,"./tet":13334,"./tet.js":13334,"./tg":23602,"./tg.js":23602,"./th":16947,"./th.js":16947,"./tk":46774,"./tk.js":46774,"./tl-ph":5868,"./tl-ph.js":5868,"./tlh":16695,"./tlh.js":16695,"./tr":22573,"./tr.js":22573,"./tzl":84509,"./tzl.js":84509,"./tzm":17118,"./tzm-latn":87078,"./tzm-latn.js":87078,"./tzm.js":17118,"./ug-cn":82617,"./ug-cn.js":82617,"./uk":56131,"./uk.js":56131,"./ur":56532,"./ur.js":56532,"./uz":69932,"./uz-latn":27220,"./uz-latn.js":27220,"./uz.js":69932,"./vi":20490,"./vi.js":20490,"./x-pseudo":32154,"./x-pseudo.js":32154,"./yo":49955,"./yo.js":49955,"./zh-cn":68355,"./zh-cn.js":68355,"./zh-hk":89547,"./zh-hk.js":89547,"./zh-mo":70374,"./zh-mo.js":70374,"./zh-tw":979,"./zh-tw.js":979};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=35358}}]);